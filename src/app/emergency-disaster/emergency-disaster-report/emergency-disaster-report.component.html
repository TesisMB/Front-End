<mat-grid-list cols="6" rowHeight="600px">
    <ng-container *ngIf="service.loading$ | async; else elseTemplate">
      <mat-grid-tile class="tile" colspan="6" rowspan="3">
        <mat-spinner></mat-spinner>
      </mat-grid-tile>
    </ng-container>
  
    <ng-template #elseTemplate>
  
      <ng-container *ngIf="(service.data$ | async).type">
        <mat-grid-tile class="tile" colspan="6" rowspan="1">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title class="d-flex flex-wrap justify-content-between">
              <p>Alertas por tipo</p>
            </mat-card-title>
            <!-- <mat-card-subtitle>{{service.type$ | async}}</mat-card-subtitle> -->
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-advanced-pie-chart
              [view]="view2"
              [scheme]="colorScheme" 
              [results]=" (service.data$ | async).type"
              [gradient]="gradient"
              [animations]="gradient"
            (select)="onSelect($event.name,'type')"
            >
            </ngx-charts-advanced-pie-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
      </ng-container>
      <ng-container *ngIf="(service.data$ | async).type">
        <mat-grid-tile class="tile" colspan="6" rowspan="1">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title class="d-flex flex-wrap justify-content-between">
                <p>Alerta por tipo</p>
            </mat-card-title>
            <!-- <mat-card-subtitle>{{service.type$ | async}}</mat-card-subtitle> -->
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-pie-grid
            [view]="view2"
            [scheme]="colorScheme"
            [results]="(service.data$ | async).type"
            (select)="onSelect($event.name,'type')">
          </ngx-charts-pie-grid>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
      </ng-container>

      <ng-container *ngIf="(service.data$ | async).createdByEmployee">
        <mat-grid-tile class="tile" colspan="6" rowspan="1">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title class="d-flex flex-wrap justify-content-between">
              <p>{{service.type$ | async | titlecase}} por solicitante</p>
            </mat-card-title>
            <!-- <mat-card-subtitle>{{service.type$ | async}}</mat-card-subtitle> -->
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-advanced-pie-chart
              [view]="view2"
              [scheme]="colorScheme" 
              [results]="(service.data$ | async).createdByEmployee"
              [gradient]="gradient"
              [animations]="gradient"
            (select)="onSelect($event.name,'createdByEmployee')"
            >
            </ngx-charts-advanced-pie-chart>
          </mat-card-content>
        </mat-card>
  
      </mat-grid-tile>
      </ng-container>
      <ng-container *ngIf="(service.data$ | async).city"
      >
      <mat-grid-tile class="tile" colspan="6" rowspan="1">
      <mat-card class="example-card">
        <mat-card-header>
          <mat-card-title class="d-flex flex-wrap justify-content-between">
            <p>{{service.type$ | async | titlecase}} por solicitante</p>
          </mat-card-title>
          <!-- <mat-card-subtitle>
            {{service.type$ | async}}
          </mat-card-subtitle> -->
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-tree-map
          [view]="view2"
          [scheme]="colorScheme"
          [results]="(service.data$ | async).city"
          [gradient]="gradient"
          [animations]="gradient"
          (select)="onSelect($event.name,'city')">
        </ngx-charts-tree-map>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    </ng-container>

    <ng-container *ngIf="typeAndYear"
    >
    <mat-grid-tile class="tile" colspan="3" rowspan="1">
    <mat-card class="example-card">
      <mat-card-header>
        <mat-card-title class="d-flex flex-wrap justify-content-between">
          <p>Tipo alerta / Cantidad Solicitudes x a√±o</p>
        </mat-card-title>
        <!-- <mat-card-subtitle>
          {{service.type$ | async}}
        </mat-card-subtitle> -->
      </mat-card-header>
      <mat-card-content>
        <ngx-charts-bar-horizontal-normalized
        [view]="view"
        [scheme]="colorScheme"
        [results]="typeAndYear"
        [gradient]="gradient"
        [xAxis]="showXAxis"
        [yAxis]="showYAxis"
            [legendPosition]="legendPosition"
            [legend]="showLegend"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxisLabel]="xAxisLabel"
        [yAxisLabel]="yAxisLabel"
        (select)="onSelectComplex($event)">
      </ngx-charts-bar-horizontal-normalized>
      </mat-card-content>
    </mat-card>
  </mat-grid-tile>
    </ng-container> 

        <ng-container *ngIf="(service.data$ | async).state"
        >
        <mat-grid-tile class="tile" colspan="3" rowspan="1">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title class="d-flex flex-wrap justify-content-between">
              <p>Alertas por estado</p>
            </mat-card-title>
            <!-- <mat-card-subtitle>
              {{service.type$ | async}}
            </mat-card-subtitle> -->
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-pie-chart
            [view]="view"
            [customColors]="barChartcustomColors"
            [results]="(service.data$ | async).state"
            [gradient]="gradient"
            [legend]="showLegend"
            [animations]="gradient"
            [legendPosition]="legendPosition"
            [labels]="showLabels"
            [explodeSlices]="true"
              (select)="onSelect($event.name,'state')"
              [doughnut]="isDoughnut"
          >
          </ngx-charts-pie-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
        </ng-container> 
        <ng-container *ngIf="(service.data$ | async).alertName"
        >
        <mat-grid-tile class="tile" colspan="3" rowspan="1">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title class="d-flex flex-wrap justify-content-between">
              <p>Alertas por nivel</p>
            </mat-card-title>
            <!-- <mat-card-subtitle>
              {{service.type$ | async}}
            </mat-card-subtitle> -->
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-pie-chart
            [view]="view"
            [customColors]="barChartcustomColors"
            [results]="(service.data$ | async).alertName"
            [gradient]="gradient"
            [legend]="showLegend"
            [animations]="gradient"
            [legendPosition]="legendPosition"
            [labels]="showLabels"
            [explodeSlices]="true"
              (select)="onSelect($event.name,'alertName')"
              [doughnut]="true"
          >
          </ngx-charts-pie-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
        </ng-container> 
    </ng-template>


  
    <!-- [xAxisTickFormatting] =  'formatingAxisX' -->
    <!-- [yAxisTickFormatting]='formatingAxisX'> -->
  </mat-grid-list
  >
  