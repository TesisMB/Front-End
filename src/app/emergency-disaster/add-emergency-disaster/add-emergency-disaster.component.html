<section class="head d-flex align-items-center" style="margin-top: 1rem;">
    <div class="col-4" style="margin-top: 2rem; margin-left: 2rem;">
        <button mat-raised-button (click)="onBack()">Atrás</button>
    </div>


    <div class="col-4 text-center">
        <h1>Registro de alerta</h1>
    </div>
</section>


<section class="col-body" id="row-aside">


    
    <form [formGroup]="addEmergencyDisaster">
        <div class="row col-12 ">
            <div class="col-12 ml-4">

                <mat-checkbox [(ngModel)]="hasVictims" labelPosition="after" [ngModelOptions]="{standalone: true}">
                    ¿La
                    alerta presenta daños materiales, heridos y/ò
                    victimas mortales? </mat-checkbox>
                
                </div>
     
                       
                        <div class="col-12 p-3 d-flex justify-content-around">
                        <mat-form-field appearance="outline">
                            <mat-label>Tipo de alerta</mat-label>
                            <mat-select formControlName="FK_TypeEmergencyID">
                                <mat-option id="FK_TypeEmergencyID" *ngFor="let emergency of arraytypeEmergencyDisaster"
                                    [value]="emergency.id">
                                    {{emergency.name}}
                                </mat-option>
                            </mat-select>
        
                            <mat-error *ngIf="formEmergency.get('FK_TypeEmergencyID').hasError('required')">
                                El responsable es<strong> requerida</strong>
                            </mat-error>
                        </mat-form-field>
        
                        <mat-form-field appearance="outline">
                            <mat-label>Grado de la alerta</mat-label>
                            <mat-select formControlName="FK_AlertID">
                                <mat-option *ngFor="let item of alerts" [value]="item.alertID">
                                    {{item.alertDegree}}
                                </mat-option>
                            </mat-select>
        
                            <mat-error *ngIf="formEmergency.get('FK_AlertID').hasError('required')">
                                El responsable es<strong> requerida</strong>
                            </mat-error>
                        </mat-form-field>
        
        
                        <mat-form-field appearance="outline">
                            <mat-label for="Fk_EmplooyeeID">Encargado</mat-label>
                            <mat-select formControlName="Fk_EmplooyeeID">
                                <mat-option *ngFor=" let item of user" [value]="item.userID">
                                    {{item.userDni}} -
                                    {{item.persons.firstName}}
                                    {{item.persons.lastName}}
                                </mat-option>
                            </mat-select>
        
                            <mat-error *ngIf="formEmergency.get('Fk_EmplooyeeID').hasError('required')">
                                El responsable es<strong> requerida</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
        
        
                    <div class="col-12 d-flex align-items-center">
                <div class="col-8">
                    <div class="d-flex align-items-center">
                        <button mat-icon-button color="warn" aria-label="Example icon button with a heart icon">
                            <mat-icon> location_on</mat-icon>
                        </button>
                        <h3>Ubicación</h3>
                    </div>
                    
                    <map>
                    </map>
                    <!-- <mat-error *ngIf="errorMap">
                       La ubicación es<strong> requerida</strong>
                    </mat-error> -->
            </div>
            <div class="d-flex col-4">

              
                    
                    <mat-form-field class="example-full-width" appearance="outline">
                        <mat-label for="emergencyDisasterInstruction">Descripción</mat-label>
                        <textarea matInput id="emergencyDisasterInstruction" name="emergencyDisasterInstruction"
                        formControlName="emergencyDisasterInstruction"></textarea>
                        <mat-error *ngIf="formEmergency.get('emergencyDisasterInstruction').hasError('required')">
                            La descripción <strong> requerida</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            
                <!-- <div class="d-flex flex-column col-12"> -->
                    <div class="d-flex flex-column col-6 input">
                <div *ngIf="hasVictims" formGroupName="victims" class="d-flex flex-wrap p-3 justify-content-between">
                    <!-- <div class="p-2"> -->
                        <mat-form-field class="infos" appearance="outline">
                            <mat-label for="affectedLocalities">Numero de localidades afectadas</mat-label>
                            <input formControlName="affectedLocalities" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('affectedLocalities').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->
                    
                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Barrios afectadas</mat-label>
                            <input formControlName="affectedNeighborhoods" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('affectedNeighborhoods').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->
    
                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Personas heridas</mat-label>
                            <input formControlName="assistedPeople" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('assistedPeople').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    </div>
                    </div>
                <!-- </div> -->

                    <div class="d-flex flex-column col-6 input" >
                        <div *ngIf="hasVictims" formGroupName="victims" class="d-flex flex-wrap p-3 justify-content-between">
                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Personas evacuadas</mat-label>
                            <input formControlName="evacuatedPeople" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('evacuatedPeople').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->
                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Personas afectadas</mat-label>
                            <input formControlName="numberAffected" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('numberAffected').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->

                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Personas fallecidas</mat-label>
                            <input formControlName="numberDeaths" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('numberDeaths').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->
                </div>
            </div>
            <div class="d-flex flex-column col-6 input">
                <div *ngIf="hasVictims" formGroupName="victims" class="d-flex flex-wrap p-3 justify-content-between">

                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos">
                            <mat-label>Nro. Familias afectadas</mat-label>
                            <input formControlName="numberFamiliesAffected" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('numberFamiliesAffected').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->

                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" class="infos" >
                            <mat-label>Nro. Personas recuperadas</mat-label>
                            <input formControlName="recoveryPeople" matInput type="number" min="0">
                            <mat-error *ngIf="formVictims.get('recoveryPeople').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    <!-- </div> -->

                    <!-- <div class="p-2"> -->
                        <mat-form-field appearance="outline" floatLabel="always" class="infos">
                            <mat-label>Daños materiales</mat-label>
                            <input formControlName="materialsDamage" matInput type="number" min="0">
                            <span matPrefix>ARS $ &nbsp;</span>
                            <mat-error *ngIf="formVictims.get('materialsDamage').hasError('min')">
                                No puede ser negativo.
                            </mat-error>
                        </mat-form-field>
                    </div>

            </div>
            <!-- </div> -->
        <!-- </div> -->




            <div class="col-12 d-flex justify-content-end">
                <button  mat-raised-button type="submit" color="primary"
                    (click)="postEmergencyDisaster()">Crear</button>
            </div>

        </div>



    </form>
</section>